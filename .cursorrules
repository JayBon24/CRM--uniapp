# Cursor 长期记忆 - UniApp Vue3 项目开发规范

## 项目基础信息
- 项目名称：UniApp Vue3 项目
- 技术栈：UniApp + Vue3 + Vite + uViewPlus + Pinia
- 项目路径：/d%3A/AI/artScore/uni-app-vue3

## 核心开发规范

### 1. 代码注释规范
- 为所有关键代码添加中文注释
- 注释应该说明代码的作用和目的
- 使用 `//` 进行单行注释，`/* */` 进行多行注释

### 2. 路径引用规范
- 使用 `@` 别名来简化路径引用（指向 `src` 目录）
- 图片地址使用全局函数 `$getImageUrl()` 处理
- 网络请求统一使用 `@/utils/request` 进行

### 3. 生命周期钩子规范
- 在uni-app中，从 `@dcloudio/uni-app` 导入所有的生命周期钩子
- 例如：`onLoad`, `onShow`, `onReady`, `onHide`, `onUnload` 等

### 4. 网络请求规范
- 所有请求由 `src/utils/request.ts` 统一处理异常
- 页面使用时，每个API调用都不需要处理异常
- 使用 `@/utils/request` 进行网络请求

### 5. 组件开发规范
- 尽量以组件的方式写代码
- 一般的组件不要放到 `main.ts` 中全局注册，除非有特殊说明
- 组件文件顺序：`<template>` → `<script>` → `<style>`

### 6. 样式规范
- 尽量使用 `@src/styles/myflex.css` 中的CSS实现功能
- 优先使用uView Plus组件库的样式

### 7. 类型定义规范
- interfaces统一放到 `@src/types/interfaces` 目录下
- 使用TypeScript进行类型定义

### 8. 包管理规范
- 使用 `pnpm` 安装包

## API接口开发规范

### 1. 接口响应格式
严格遵循 `docs/API接口规范.md` 中的规范：

**基础响应格式：**
```json
{
    "code": 200,      // 状态码
    "msg": "操作成功", // 消息提示
    "data": {}        // 响应数据
}
```

**分页查询格式：**
```json
{
    "code": 200,         // 状态码
    "msg": "查询成功",    // 消息提示
    "total": 100,        // 总记录数
    "rows": []          // 分页数据列表
}
```

### 2. 分页参数规范
- `pageNum`: 当前页码（默认1）
- `pageSize`: 每页显示记录数（默认10）
- `orderByColumn`: 排序列（可选）
- `isAsc`: 排序方式（"asc"/"desc"，默认"asc"）

### 3. 状态码规范
- 200: 操作成功
- 201: 对象创建成功
- 401: 未授权
- 403: 访问受限/授权过期
- 404: 资源未找到
- 500: 系统内部错误

## Mock数据开发规范

### 1. 严格遵循 `docs/mock规范.md` 中的规范

**文件结构：**
```
src/mock/
  ├── index.ts          # Mock入口文件，自动注册所有处理器
  ├── utils.ts          # 工具函数和错误码定义
  ├── [module].ts       # 各模块的Mock数据文件
```

**命名规范：**
- 文件使用小写字母和连字符：`user-profile.ts`、`fun-order.ts`
- 变量前缀使用 `mock`：`mockUserList`、`mockCategories`
- 函数前缀使用 `mock`：`mockGetUserProfile`、`mockUpdateUserInfo`

### 2. 图片处理规范
- Mock的图片使用 `picsum.photos` 的远程图片
- 使用 `getRandomImage()` 函数生成随机图片

### 3. 响应格式规范
- 使用 `createMockResponse()` 函数统一响应格式
- 必须返回符合 `{code, msg, data/rows, total}` 格式的数据
- 错误响应使用 `createMockError()` 函数

### 4. 数据生成规范
- 提供足够的测试数据（建议8-12条）
- 包含各种边界情况和异常场景
- 使用有意义的示例数据
- 支持分页、过滤、排序等功能

## 项目特定规范

### 1. 商品分类规范
- 商城的商品是 `goods`
- 笔记与好玩的商品是 `products`

### 2. 文档维护规范
- 维护 `@docs/API接口文档.md`，有接口更新时自动更新文档
- 维护 `@docs/前端开发任务.md` 文档，代码更新时同时更新任务进度

### 3. 权限系统规范
- 使用 `@/components/PermissionWrapper` 进行权限控制
- 遵循权限系统相关文档的规范

## 开发流程规范

### 1. 创建新接口时
1. 在 `src/api` 目录下创建接口文件
2. 在 `src/mock` 目录下创建对应的Mock数据
3. 更新 `@docs/API接口文档.md`
4. 更新 `@docs/前端开发任务.md`

### 2. 创建新组件时
1. 在 `src/components` 目录下创建组件
2. 添加中文注释说明组件作用
3. 使用uView Plus组件库
4. 优先使用 `@src/styles/myflex.css` 中的样式

### 3. 错误处理规范
- 所有异常由 `request.ts` 统一处理
- 页面组件不需要单独处理API异常
- 使用统一的错误提示和状态码处理

## 注意事项

### 1. 代码质量
- 精准修改提出的问题，不要乱修改其他代码
- 使用fix命令时准确修复，不要修改不相关的代码
- 保持代码的可读性和可维护性

### 2. 性能优化
- 避免生成过多无用数据
- 合理使用分页机制
- 优化数据生成算法

### 3. 兼容性
- 确保Mock数据与真实API响应格式一致
- 测试Mock和真实API的切换是否正常
- 验证错误处理机制在Mock模式下是否正常工作

## 常用工具函数

### 1. Mock工具函数
- `createMockResponse(data)`: 创建标准响应
- `createMockError(code, message)`: 创建错误响应
- `randomInt(min, max)`: 生成随机整数
- `randomDate()`: 生成随机日期
- `getRandomImage(type)`: 生成随机图片
- `generateRandomId()`: 生成随机ID

### 2. 环境配置
- 通过环境变量 `VITE_USE_MOCK` 控制是否启用Mock
- 开发环境默认启用Mock，生产环境禁用

### 3. 错误码常量
```typescript
export const MockErrorCode = {
  SUCCESS: 200,      // 操作成功
  CREATED: 201,      // 创建成功
  BAD_REQUEST: 400,  // 参数错误
  UNAUTHORIZED: 401, // 未授权
  FORBIDDEN: 403,    // 权限不足
  NOT_FOUND: 404,    // 资源不存在
  SERVER_ERROR: 500  // 服务器错误
}
```

## 总结

本规范确保项目开发的一致性和质量，所有开发人员必须严格遵循：
1. 代码注释和路径引用规范
2. API接口和Mock数据的标准格式
3. 组件开发和样式使用规范
4. 错误处理和权限控制规范
5. 文档维护和开发流程规范

遵循这些规范将确保项目的可维护性、可扩展性和代码质量。
