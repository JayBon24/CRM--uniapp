# Tab5「我的」测试预期（Mock 环境）

## 0. 前置条件

- **Mock 开启**：确认 `src/config/env.ts` 中 `useMock: true`
- **启动命令**：

```powershell
cd uniapp-vue3; npm run dev:h5
```

---

## 1. P5-1 个人中心首页（Tab「我的」）

### 1.1 页面打开与信息展示
**操作**：点击底部 Tab「我的」  
**预期**：
- ✅ 显示用户卡片（头像/姓名/角色/组织信息）
- ✅ 显示入口列表：个人资料 / 设置 / 反馈与支持 / 关于

### 1.2 管理入口可见性
**前置**：Mock 环境下在「系统设置 → 开发者」切换角色

**操作**：切换为「销售」  
**预期**：
- ✅ 不显示「管理入口」区域（审批中心/下发/规则等）

**操作**：切换为「团队/分所/总所管理」  
**预期**：
- ✅ 显示「管理入口」区域
- ✅ 包含：审批中心、公海分配、团队日程、管理报表、规则配置
- ✅ 点击各入口可正常跳转

### 1.3 管理入口功能页验证
**操作**：点击「公海分配」
**预期**：
- ✅ 进入分配页面，看到待分配列表（Mock 数据）
- ✅ 勾选后可选择人员指派

**操作**：点击「团队日程」
**预期**：
- ✅ 看到团队全员日历视图（一期展示周视图）

**操作**：点击「管理报表」
**预期**：
- ✅ 自动跳转至数据报表 Tab (Tab4)

**操作**：点击「规则配置」
**预期**：
- ✅ 看到回收时限、跟进频率等配置项，修改并保存提示成功

---

## 2. P5-2 我的设置

### 2.1 跳转设置
**操作**：在「我的」点击「设置」  
**预期**：
- ✅ 跳转到 `系统设置` 页面
- ✅ Mock 环境显示「开发者」区块，可切换角色

### 2.2 提前量设置（仅 15/30 分钟）
**操作**：在设置页找到“提前量设置”，选择 15分钟/30分钟  
**预期**：
- ✅ 仅出现 2 个选项：15分钟、30分钟（不显示渠道选择）
- ✅ 选择后立即生效并持久化（刷新后仍保持）

### 2.3 用户协议与隐私政策
**操作**：点击“用户协议”/“隐私政策”入口  
**预期**：
- ✅ 进入静态页或 WebView 正常展示内容

### 2.4 退出登录
**操作**：点击“退出登录”并确认  
**预期**：
- ✅ 清空 token/store
- ✅ 跳转到登录页

---

## 3. P5-4 反馈与支持

### 3.1 表单校验
**操作**：进入「反馈与支持」，不填内容直接提交  
**预期**：
- ✅ 提示必填校验（“请输入反馈内容”或类似）

### 3.2 提交成功
**操作**：选择类型，填写内容，上传图片（可选），提交  
**预期**：
- ✅ 显示 loading
- ✅ 提示提交成功
- ✅ 自动返回或清空表单（按实现）

### 3.3 Feedback context（可选）
**操作**：从「我的」进入反馈页并提交  
**预期**：
- ✅ 请求 payload 中 `context` 为空或不传

**操作**：从客户详情页进入反馈页并提交  
**预期**：
- ✅ 请求 payload 中自动带 `context.client_id`
- ✅ 若指定字段反馈，则带 `context.field`

---

## 4. P5-M1 审批中心（管理角色）

### 4.1 入口权限
**前置**：切换为「销售」  
**操作**：尝试进入审批中心  
**预期**：
- ✅ 不可见入口；若通过 URL 进入，应提示无权限并返回

### 4.2 列表与详情
**前置**：切换为「团队/分所/总所管理」  
**操作**：进入审批中心  
**预期**：
- ✅ 有「待审批/已处理」Tab
- ✅ 列表显示审批任务（类型/申请人/客户/时间）

**操作**：进入任意审批详情  
**预期**：
- ✅ 展示申请内容与附件
- ✅ 可选择通过/驳回
- ✅ 驳回必须填写原因


