

# UniApp 打包小程序常见问题及解决方案

## 组件使用问题

**条件渲染问题**
- `v-if` 会完全销毁和重新创建DOM元素在小程序中，子组件的生命周期钩子不会重新执行，要使用 `v-show + key` 属性

**文本组件限制**
- `<text>` 标签只能包含纯文本内容，不能嵌套其他组件或复杂的 HTML 结构

**按钮组件使用**
- `<u-button></u-button>` 如果不是整行的，需要包裹在 `<view></view>` 标签中

**弹出层组件问题**
- `<u-popup></u-popup>` 弹出层组件的原页面不能使用 `<scroll-view>` 标签，否则会背景滚动
- 下拉与加载使用 `<scroll-view>` 都会有问题，所以不要使用 `<scroll-view>` 标签

## TabBar 配置问题

**TabBar 不显示**
- `tabBar.list` 数组的第一项必须和 `pages` 配置中的第一项相同
- `pagePath` 不能是相对路径，必须与 `pages` 里的 `path` 保持一致
- 确保图标路径正确，图片能正常加载

## 循环参数问题

**循环参数问题**
- 在 `v-for` 中使用 `index` 作为参数时，在小程序中可能变成字符串 `'index'` 而不是实际的索引值
- 建议使用 `v-for="(item, index) in list" :key="index"` 的方式

**事件参数传递**
- 确保事件绑定的参数正确传递
- 避免在事件处理函数中使用字符串形式的参数

## 网络请求

**网络请求**
- 网络请求不能使用其他库，要使用 `uni.request`，图片上传图片时，图片路径不能使用 `require` 引入，只能使用 `uni.uploadFile`

## CSS 选择器限制

**CSS 选择器限制**
- 不支持 `*` 选择器
- 没有 `body` 元素选择器，改用 `page` 元素选择器
- 避免使用太新的 CSS 语法，否则在 Android 低端机上会有样式错误

## 页面生命周期

**页面生命周期**
- 小程序不支持某些 Vue 生命周期，如 `beforeUpdate`、`updated`

## 样式问题

**uView 组件样式**
- CSS写在 u-* 组件上，常常不会有效果。需要包裹或者放到其他地方

<!-- loading dynamically imported module -->
## 动态导入模块
- TypeError: error loading dynamically imported module 错误通常由以下原因引起：
- 缺少TypeScript声明：<script setup>标签缺少lang="ts"属性

## 小程序对复杂对象双向绑定支持有限
- v-model="scoreDetails[standard.id]" 不能这样用，改为：:value="scoreDetails[standard.id] || 0"  @change="(value) => updateScore(standard.id, value)"

