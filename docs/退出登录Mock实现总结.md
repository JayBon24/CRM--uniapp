# é€€å‡ºç™»å½•Mockå®ç°æ€»ç»“

## é—®é¢˜æè¿°

ç”¨æˆ·åé¦ˆåœ¨è®¾ç½®é¡µé¢ç‚¹å‡»é€€å‡ºç™»å½•æ—¶ï¼Œæ§åˆ¶å°æ˜¾ç¤º"æœªæ‰¾åˆ°æ¨¡æ‹Ÿæ•°æ®å¤„ç†å™¨: /logout"çš„é”™è¯¯ä¿¡æ¯ã€‚

## é—®é¢˜åˆ†æ

1. **APIæ¥å£è·¯å¾„ä¸åŒ¹é…**ï¼š
   - APIæ¥å£æ–‡ä»¶ `src/api/user.ts` ä¸­å®šä¹‰äº†å¤šä¸ªé€€å‡ºç™»å½•æ¥å£
   - ä¸»è¦æ¥å£ï¼š`/logout`ï¼ˆPOSTï¼‰
   - å¤‡ç”¨æ¥å£ï¼š`/auth/logout`ï¼ˆPOSTï¼‰
   - ç”¨æˆ·æ¥å£ï¼š`/user/logout`ï¼ˆPOSTï¼‰

2. **Mockå¤„ç†å™¨ç¼ºå¤±**ï¼š
   - åŸæœ‰çš„Mockæ–‡ä»¶ `src/mock/user.ts` åªåŒ…å« `/user/logout` è·¯å¾„çš„å¤„ç†å™¨
   - ç¼ºå°‘ `/logout` å’Œ `/auth/logout` è·¯å¾„çš„Mockå¤„ç†å™¨

## è§£å†³æ–¹æ¡ˆ

### 1. æ·»åŠ ç¼ºå¤±çš„Mockå¤„ç†å™¨

åœ¨ `src/mock/user.ts` ä¸­æ·»åŠ äº†ä»¥ä¸‹Mockå¤„ç†å™¨ï¼š

```typescript
// å¯¼å‡º Mock å¤„ç†å™¨
export default [
  // ... å…¶ä»–å¤„ç†å™¨
  {
    url: '/user/logout',
    response: mockUserLogout
  },
  {
    url: '/logout',           // æ–°å¢
    response: mockUserLogout
  },
  {
    url: '/auth/logout',      // æ–°å¢
    response: mockUserLogout
  },
  // ... å…¶ä»–å¤„ç†å™¨
] as MockHandler[]
```

### 2. ä¼˜åŒ–Mockå“åº”æ ¼å¼

æ”¹è¿›äº† `mockUserLogout` å‡½æ•°çš„å“åº”æ ¼å¼ï¼š

```typescript
/**
 * ç”¨æˆ·é€€å‡ºç™»å½•
 */
function mockUserLogout(params: any) {
  // æ¨¡æ‹Ÿé€€å‡ºç™»å½•çš„å»¶è¿Ÿ
  return mockDelay(500).then(() => {
    // æ¨¡æ‹Ÿæ¸…é™¤ token å’Œä¼šè¯
    return createMockResponse({
      code: 200,
      msg: 'é€€å‡ºæˆåŠŸ',
      data: {
        message: 'ç”¨æˆ·å·²æˆåŠŸé€€å‡ºç™»å½•',
        timestamp: new Date().toISOString(),
        sessionCleared: true
      }
    })
  })
}
```

### 3. æ›´æ–°APIæ–‡æ¡£

åœ¨ `docs/APIæ¥å£æ–‡æ¡£.md` ä¸­æ›´æ–°äº†é€€å‡ºç™»å½•æ¥å£çš„è¯´æ˜ï¼š

- æ”¯æŒå¤šä¸ªè·¯å¾„ï¼š`/logout`ã€`/user/logout`ã€`/auth/logout`
- å®Œå–„äº†å“åº”æ ¼å¼è¯´æ˜
- æ·»åŠ äº†å“åº”å‚æ•°è¯¦ç»†è¯´æ˜

## å®ç°æ•ˆæœ

### 1. æ”¯æŒçš„æ¥å£è·¯å¾„
- âœ… `/logout` - ä¸»è¦é€€å‡ºç™»å½•æ¥å£
- âœ… `/auth/logout` - å¤‡ç”¨é€€å‡ºç™»å½•æ¥å£
- âœ… `/user/logout` - ç”¨æˆ·é€€å‡ºç™»å½•æ¥å£

### 2. Mockå“åº”æ ¼å¼
```json
{
  "code": 200,
  "msg": "é€€å‡ºæˆåŠŸ",
  "data": {
    "message": "ç”¨æˆ·å·²æˆåŠŸé€€å‡ºç™»å½•",
    "timestamp": "2024-01-15T10:30:00.000Z",
    "sessionCleared": true
  }
}
```

### 3. åŠŸèƒ½ç‰¹æ€§
- âœ… 500mså»¶è¿Ÿæ¨¡æ‹ŸçœŸå®ç½‘ç»œè¯·æ±‚
- âœ… æ ‡å‡†å“åº”æ ¼å¼
- âœ… æ—¶é—´æˆ³è®°å½•
- âœ… ä¼šè¯æ¸…é™¤æ ‡è¯†
- âœ… é”™è¯¯å¤„ç†æœºåˆ¶

## æµ‹è¯•éªŒè¯

### 1. æ§åˆ¶å°è¾“å‡º
```
ğŸš€ å‘èµ·è¯·æ±‚ ====> {url: "/logout", method: "post", isMock: true, ...}
ğŸ“¦ æ¨¡æ‹Ÿæ•°æ®å“åº” <==== {url: "/logout", data: {...}}
```

### 2. åŠŸèƒ½æµç¨‹
1. ç”¨æˆ·ç‚¹å‡»é€€å‡ºç™»å½•æŒ‰é’®
2. å¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†
3. ç”¨æˆ·ç¡®è®¤é€€å‡º
4. æ˜¾ç¤ºåŠ è½½çŠ¶æ€
5. Mockå¤„ç†å™¨å“åº”
6. æ¸…é™¤æœ¬åœ°æ•°æ®
7. è·³è½¬åˆ°ç™»å½•é¡µé¢

### 3. é”™è¯¯å¤„ç†
- å³ä½¿APIè°ƒç”¨å¤±è´¥ï¼Œæœ¬åœ°æ•°æ®ä¹Ÿä¼šè¢«æ¸…é™¤
- ç”¨æˆ·ä¼šè¢«é‡å®šå‘åˆ°ç™»å½•é¡µé¢
- æä¾›å‹å¥½çš„é”™è¯¯æç¤º

## ç›¸å…³æ–‡ä»¶

### ä¿®æ”¹çš„æ–‡ä»¶
- `src/mock/user.ts` - æ·»åŠ é€€å‡ºç™»å½•Mockå¤„ç†å™¨
- `docs/APIæ¥å£æ–‡æ¡£.md` - æ›´æ–°æ¥å£æ–‡æ¡£

### ç›¸å…³æ–‡ä»¶
- `src/api/user.ts` - APIæ¥å£å®šä¹‰
- `src/pages/settings/index.vue` - è®¾ç½®é¡µé¢ï¼ˆé€€å‡ºç™»å½•UIï¼‰
- `src/stores/user.ts` - ç”¨æˆ·çŠ¶æ€ç®¡ç†
- `src/utils/request.ts` - è¯·æ±‚å¤„ç†ï¼ˆMockæ‹¦æˆªï¼‰

### æ–°å¢æ–‡æ¡£
- `docs/Mocké€€å‡ºç™»å½•æµ‹è¯•.md` - æµ‹è¯•æ–‡æ¡£
- `docs/é€€å‡ºç™»å½•Mockå®ç°æ€»ç»“.md` - æœ¬æ€»ç»“æ–‡æ¡£

## æ³¨æ„äº‹é¡¹

1. **Mockå»¶è¿Ÿ**ï¼šé€€å‡ºç™»å½•Mockæœ‰500mså»¶è¿Ÿï¼Œæ¨¡æ‹ŸçœŸå®ç½‘ç»œè¯·æ±‚
2. **æ•°æ®æ¸…ç†**ï¼šMockå“åº”åŒ…å« `sessionCleared: true` æ ‡è¯†
3. **æ—¶é—´æˆ³**ï¼šå“åº”åŒ…å«å½“å‰æ—¶é—´æˆ³ï¼Œä¾¿äºè°ƒè¯•
4. **é”™è¯¯å¤„ç†**ï¼šå³ä½¿Mockå¤±è´¥ï¼Œæœ¬åœ°æ¸…ç†é€»è¾‘ä¹Ÿä¼šæ‰§è¡Œ
5. **å¤šè·¯å¾„æ”¯æŒ**ï¼šæ”¯æŒå¤šä¸ªé€€å‡ºç™»å½•æ¥å£è·¯å¾„ï¼Œæé«˜å…¼å®¹æ€§

## åç»­ä¼˜åŒ–å»ºè®®

1. **ç»Ÿä¸€æ¥å£è·¯å¾„**ï¼šå»ºè®®ç»Ÿä¸€ä½¿ç”¨ä¸€ä¸ªé€€å‡ºç™»å½•æ¥å£è·¯å¾„
2. **Mocké…ç½®åŒ–**ï¼šå¯ä»¥è€ƒè™‘å°†Mockå»¶è¿Ÿæ—¶é—´é…ç½®åŒ–
3. **æµ‹è¯•è¦†ç›–**ï¼šæ·»åŠ å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
4. **ç›‘æ§æ—¥å¿—**ï¼šæ·»åŠ Mockè°ƒç”¨çš„ç›‘æ§å’Œæ—¥å¿—è®°å½•

## æ€»ç»“

é€šè¿‡æ·»åŠ ç¼ºå¤±çš„Mockå¤„ç†å™¨å’Œä¼˜åŒ–å“åº”æ ¼å¼ï¼ŒæˆåŠŸè§£å†³äº†é€€å‡ºç™»å½•åŠŸèƒ½åœ¨Mockæ¨¡å¼ä¸‹çš„é—®é¢˜ã€‚ç°åœ¨ç”¨æˆ·å¯ä»¥åœ¨è®¾ç½®é¡µé¢æ­£å¸¸ä½¿ç”¨é€€å‡ºç™»å½•åŠŸèƒ½ï¼ŒMockç³»ç»Ÿä¼šæ­£ç¡®å“åº”è¯·æ±‚å¹¶è¿”å›æ ‡å‡†æ ¼å¼çš„æ•°æ®ã€‚
