# 日程管理功能实现说明

## 功能概述

实现了完整的日程管理功能，包括日历视图、日程列表、日程详情、添加/编辑日程等功能。

## 已实现的功能

### 1. 页面结构

- **日程列表页** (`src/pages/tab/schedule.vue`)
  - 月历视图展示
  - 点击日期跳转到日期详情页
  - 右下角浮动按钮添加新日程

- **日期详情页** (`src/pages/other/customer/schedule/day-detail.vue`)
  - 时间轴视图展示当天所有日程
  - 按时间顺序排列
  - 显示日程类型、标题、状态、优先级等信息
  - 点击日程卡片查看详情

- **日程详情页** (`src/pages/other/customer/schedule/detail.vue`)
  - 完整展示日程信息
  - 支持更新状态（待处理→进行中→已完成）
  - 支持编辑和删除操作

- **添加/编辑日程页** (`src/pages/other/customer/schedule/edit.vue`)
  - 表单填写日程信息
  - 支持创建和编辑两种模式
  - 必填字段：标题、日程类型、开始时间、优先级

### 2. API接口封装

文件：`src/api/schedule.ts`

已封装的接口：
- `getScheduleList` - 获取日程列表
- `getScheduleDetail` - 获取日程详情
- `createSchedule` - 创建日程
- `updateSchedule` - 更新日程
- `deleteSchedule` - 删除日程
- `batchDeleteSchedules` - 批量删除
- `updateScheduleStatus` - 更新状态
- `getTodaySchedules` - 获取今日日程
- `getWeekSchedules` - 获取本周日程
- `getScheduleStatistics` - 获取统计数据
- `getCalendarView` - 获取日历视图数据
- `createScheduleFromPlan` - 从客户计划创建日程
- `getSchedulesByRelated` - 获取关联对象的日程
- `getUpcomingReminders` - 获取即将到来的提醒

### 3. Mock数据

文件：`src/mock/schedule.ts`

提供了完整的Mock数据支持，包括：
- 5条示例日程数据
- 所有API接口的Mock实现
- 支持筛选、分页、搜索等功能

### 4. 类型定义

文件：`src/types/interfaces/schedule.ts`

定义了完整的TypeScript类型：
- `Schedule` - 日程对象
- `ScheduleType` - 日程类型（会议、开庭、截止日期、提醒、其他）
- `ScheduleStatus` - 状态（待处理、进行中、已完成、已取消）
- `SchedulePriority` - 优先级（低、中、高、紧急）
- `ScheduleCreateParams` - 创建参数
- `ScheduleUpdateParams` - 更新参数
- 等等...

## 使用流程

### 1. 查看日程

1. 进入"日程"Tab页
2. 查看月历视图，可以看到有日程的日期会显示标记
3. 点击任意日期，跳转到该日期的详情页
4. 在日期详情页查看当天所有日程的时间轴

### 2. 查看日程详情

1. 在日期详情页点击任意日程卡片
2. 进入日程详情页查看完整信息
3. 可以进行以下操作：
   - 更新状态（开始处理、标记完成）
   - 编辑日程
   - 删除日程

### 3. 添加日程

方式一：从日程Tab页添加
1. 点击右下角蓝色浮动按钮
2. 填写日程信息
3. 点击"创建"按钮

方式二：从日期详情页添加
1. 在日期详情页点击底部"新增日程"按钮
2. 自动填充选中的日期
3. 填写其他信息后创建

### 4. 编辑日程

1. 在日程详情页点击"编辑"按钮
2. 修改日程信息
3. 点击"保存"按钮

### 5. 删除日程

1. 在日程详情页点击"删除"按钮
2. 确认删除操作

## 字段说明

### 必填字段

- **标题** (title) - 日程的标题
- **日程类型** (schedule_type) - 会议/开庭/截止日期/提醒/其他
- **开始时间** (start_time) - 日程开始时间
- **优先级** (priority) - 低/中/高/紧急

### 选填字段

- **结束时间** (end_time) - 日程结束时间
- **地点** (location) - 日程地点
- **描述** (description) - 日程描述
- **全天事件** (is_all_day) - 是否为全天事件
- **启用提醒** (reminder_enabled) - 是否启用提醒
- **提前提醒** (reminder_time) - 提前多少分钟提醒
- **关联客户** (related_type, related_id) - 关联的客户或案件
- **备注** (remark) - 备注信息

## 样式特点

### 优先级颜色

- **紧急** - 红色 (#ef4444)
- **高** - 橙色 (#f59e0b)
- **中** - 蓝色 (#2563eb)
- **低** - 绿色 (#10b981)

### 日程类型颜色

- **会议** - 蓝色
- **开庭** - 红色
- **截止日期** - 橙色
- **提醒** - 绿色
- **其他** - 灰色

### 状态颜色

- **待处理** - 蓝色背景
- **进行中** - 橙色背景
- **已完成** - 绿色背景
- **已取消** - 灰色背景

## 与客户计划的联动

当在客户管理模块添加计划并设置日程提醒时，会自动调用 `createScheduleFromPlan` 接口创建日程，实现数据同步。

## 后续可扩展功能

1. **日历视图优化**
   - 在月历上显示日程数量标记
   - 支持周视图和日视图切换

2. **搜索功能**
   - 按标题、描述、地点搜索日程

3. **筛选功能**
   - 按类型、状态、优先级筛选

4. **统计功能**
   - 展示日程统计数据
   - 图表展示

5. **提醒功能**
   - 系统通知提醒
   - 即将到来的日程提醒列表

6. **重复日程**
   - 支持按日/周/月/年重复
   - 重复规则设置

7. **参与人员**
   - 添加参与人员
   - 人员选择器

8. **附件功能**
   - 上传附件
   - 查看附件

## 测试建议

1. 测试日期跳转功能
2. 测试日程的增删改查
3. 测试状态更新流程
4. 测试表单验证
5. 测试Mock数据是否正常返回

## 注意事项

1. 时间格式统一使用ISO 8601格式
2. 所有接口都已配置Mock数据，可以在开发环境直接测试
3. 页面已配置路由，可以直接访问
4. 使用了uview-plus组件库，确保已正确安装
