/**
 * 环境变量配置
 * 统一配置，不区分环境
 */

// 简单的布尔解析，兼容字符串与布尔值
function parseBool(val: any, defaultValue = false) {
  if (val === undefined || val === null) return defaultValue
  if (typeof val === 'boolean') return val
  if (typeof val === 'string') return val.toLowerCase() === 'true'
  return defaultValue
}

const ENV = (import.meta as any).env || {}

// 统一配置（优先读取 .env 中的 VITE_ 前缀变量）
const CONFIG = {
  // API配置
  apiBaseUrl: ENV.VITE_PROXY_URL || ENV.VITE_API_BASE_URL || 'https://api.iexpo.online',

  // 地图API Key
  amapKey: ENV.VITE_AMAP_KEY || '1dc675ee5608855c204f0c0152182186',
  qqmapKey: ENV.VITE_QQMAP_KEY || 'WNMBZ-ZPU35-ZIOIT-IEKS3-LDJOK-OFBXO',

  // 应用配置
  appTitle: ENV.VITE_APP_TITLE || '抖音商城',

  // 客服配置（保持默认值，可按需扩展 env）
  customerService: {
    phone: '400-123-4567',
    workTime: '9:00-18:00',
    email: 'service@douyin.com',
    wechat: 'douyin_service'
  },

  // 功能开关
  useMock: parseBool(ENV.VITE_USE_MOCK, false),
}

// 获取环境变量配置
export function getEnvConfig() {
  return CONFIG
}

// 获取环境变量（简化版本）
export const getEnv = () => {
  return {
    // 地图API Key
    AMAP_KEY: CONFIG.amapKey,
    QQMAP_KEY: CONFIG.qqmapKey,

    // API配置
    API_BASE_URL: CONFIG.apiBaseUrl,

    // 应用配置
    APP_TITLE: CONFIG.appTitle,

    // 客服配置
    CUSTOMER_SERVICE: CONFIG.customerService,

    // 功能开关
    USE_MOCK: CONFIG.useMock,
  }
}

// 导出环境配置
export const env = getEnv()
